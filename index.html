<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="./favicon.ico" type="image/x-icon">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–∫–∞–∑–∞ BK</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>

<!-- ===== –í–•–û–î ===== -->
<div id="loginOverlay" class="login-overlay">
  <div class="login-box">
    <span style="font-size:42px;display:block;margin-bottom:2px;"> <img src="./icons/burger.png" width="28" height="28" alt=""></span>
    <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–∫–∞–∑–∞</h2>
    <p>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞</p>
    <input id="loginPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å" autocomplete="current-password" />
    <button id="loginBtn" class="btn primary">–í–æ–π—Ç–∏</button>
  </div>
</div>

<header class="header">
<h1 align="center">
  <img
    src="./icons/burger.png"
    width="28"
    height="28"
    style="vertical-align: -4px;"
    alt=""
  >
  –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–∫–∞–∑–∞
</h1>
  <nav class="header-menu">
    <button id="menuHistory" class="menu-btn"><img src="./icons/history.png" width="14" height="14" alt=""> –ò—Å—Ç–æ—Ä–∏—è</button>
    <button id="menuDatabase" class="menu-btn"><img src="./icons/base.png" width="14" height="14"  alt=""> –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</button>
    <button id="addManual" class="menu-btn"><img src="./icons/new-product.png" width="14" height="14" alt=""> –ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä</button>
    <button id="menuAnalytics" class="menu-btn"><img src="./icons/analytics.png" width="14" height="14"  alt=""> –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
    <button id="menuPlanning" class="menu-btn"><img src="./icons/planning.png" width="14" height="14" alt=""> –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
    <button id="menuCalendar" class="menu-btn"><img src="./icons/calendar.png" width="14" height="14" alt=""> –ö–∞–ª–µ–Ω–¥–∞—Ä—å</button>
  </nav>
  <span id="entityBadge" class="entity-badge">–ë—É—Ä–≥–µ—Ä –ë–ö</span>
</header>

<main class="container">

  <!-- ===== –ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ö–ê–ó–ê ===== -->
  <section class="card">
    <h2>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–∫–∞–∑–∞</h2>

    <div class="settings">
      <label class="tooltip-wrap" data-tip="–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∑–∞–∫–∞–∑">
        –Æ—Ä. –ª–∏—Ü–æ
        <select id="legalEntity">
          <option value="–ë—É—Ä–≥–µ—Ä –ë–ö">–ë—É—Ä–≥–µ—Ä –ë–ö</option>
          <option value="–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞">–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞</option>
          <option value="–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä">–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä</option>
        </select>
      </label>

      <label class="tooltip-wrap" data-tip="–§–∏–ª—å—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É">
        –ü–æ—Å—Ç–∞–≤—â–∏–∫
        <select id="supplierFilter">
          <option value="">–í—Å–µ / —Å–≤–æ–±–æ–¥–Ω—ã–π</option>
        </select>
      </label>

      <label class="tooltip-wrap" data-tip="–î–∞—Ç–∞ –æ—Ç –∫–æ—Ç–æ—Ä–æ–π —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ä–∞—Å—Ö–æ–¥ —Ç–æ–≤–∞—Ä–æ–≤">
        –î–∞—Ç–∞ —Å–µ–≥–æ–¥–Ω—è
        <input type="date" id="today" />
      </label>

      <label class="tooltip-wrap" data-tip="–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è –¥–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞">
        –î–∞—Ç–∞ –ø—Ä–∏—Ö–æ–¥–∞
        <input type="date" id="deliveryDate" />
      </label>

      <label class="tooltip-wrap" data-tip="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ –¥–Ω–µ–≤–Ω–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞">
        –ü–µ—Ä–∏–æ–¥ —Ä–∞—Å—Ö–æ–¥–∞ (–¥–Ω–µ–π)
        <input type="number" id="periodDays" value="30" />
      </label>


      <label class="tooltip-wrap" data-tip="–ñ–µ–ª–∞–µ–º—ã–π –∑–∞–ø–∞—Å —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ –ø–æ—Å–ª–µ –ø–æ—Å—Ç–∞–≤–∫–∏ (–≤ –¥–Ω—è—Ö –∏–ª–∏ –¥–∞—Ç–∞)">
        –¢–æ–≤–∞—Ä–Ω—ã–π –∑–∞–ø–∞—Å
        <div class="safety-input-wrap">
          <input type="text" id="safetyDays" placeholder="14 / –¥–æ 18.02.26" />
          <button type="button" id="safetyCalendarBtn" class="safety-calendar-icon" title="–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É –æ–∫–æ–Ω—á–∞–Ω–∏—è –∑–∞–ø–∞—Å–∞">
            <img src="./icons/calendar.png" width="16" height="16" alt="">
          </button>
        </div>
      </label>
      <label class="tooltip-wrap" data-tip="–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ —Ä–∞—Å—Ö–æ–¥–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞">
        –ï–¥–∏–Ω–∏—Ü—ã
        <select id="unit">
          <option value="pieces">–®—Ç—É–∫–∏</option>
          <option value="boxes">–ö–æ—Ä–æ–±–∫–∏</option>
        </select>
      </label>

      <label class="tooltip-wrap" data-tip="–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫—É –¢—Ä–∞–Ω–∑–∏—Ç (—Ç–æ–≤–∞—Ä –≤ –ø—É—Ç–∏) –≤ —Ç–∞–±–ª–∏—Ü–µ –∑–∞–∫–∞–∑–∞">
        –ù–∞–ª–∏—á–∏–µ —Ç—Ä–∞–Ω–∑–∏—Ç–∞
        <select id="hasTransit">
          <option value="false">–ù–µ—Ç</option>
          <option value="true">–î–∞</option>
        </select>
      </label>

      <label class="tooltip-wrap" data-tip="–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫—É –ó–∞–ø–∞—Å (–¥–æ –∫–∞–∫–æ–π –¥–∞—Ç—ã —Ö–≤–∞—Ç–∏—Ç —Ç–æ–≤–∞—Ä–∞) –≤ —Ç–∞–±–ª–∏—Ü–µ –∑–∞–∫–∞–∑–∞">
        –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–ø–∞—Å–∞
        <select id="showStockColumn">
          <option value="false">–ù–µ—Ç</option>
          <option value="true">–î–∞</option>
        </select>
      </label>

      <label class="tooltip-wrap" data-tip="–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ä–∞—Å—Ö–æ–¥–∞, –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 25%">
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        <select id="dataValidation">
          <option value="true">–î–∞</option>
          <option value="false">–ù–µ—Ç</option>
        </select>
      </label>
    </div>

    <!-- –ö–õ–Æ–ß–ï–í–ê–Ø –ö–ù–û–ü–ö–ê -->
    <button id="buildOrder" class="btn primary">
      <img src="./icons/box.png" width="18" height="18" style="vertical-align:-3px;" alt=""> –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑
    </button>
  </section>

  <!-- ===== –ó–ê–ö–ê–ó (–°–ö–†–´–¢ –î–û –ö–ù–û–ü–ö–ò) ===== -->
  <div id="orderSection" class="hidden">

    <!-- –¢–ê–ë–õ–ò–¶–ê –ó–ê–ö–ê–ó–ê -->
    <section class="card">
      <h2>–ó–∞–∫–∞–∑ <span id="itemsCounter" style="font-weight:400;font-size:14px;color:#8B7355;"></span></h2>

      <!-- –ö–û–ú–ü–ê–ö–¢–ù–û–ï –ú–ï–ù–Æ -->
      <div class="order-actions" style="display:flex;gap:6px;margin-bottom:12px;font-size:13px;flex-wrap:wrap;align-items:center;">
        <button id="undoBtn" class="btn secondary tooltip-wrap" disabled data-tip="–û—Ç–º–µ–Ω–∏—Ç—å (Ctrl+Z)" style="padding:4px 8px;">‚Ü∂</button>
        <button id="redoBtn" class="btn secondary tooltip-wrap" disabled data-tip="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å (Ctrl+Y)" style="padding:4px 8px;">‚Ü∑</button>
        <button id="allToOrderBtn" class="btn primary tooltip-wrap" data-tip="–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ä–∞—Å—á—ë—Ç –≤ –∑–∞–∫–∞–∑ –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤" style="padding:4px 10px;">–í –∑–∞–∫–∞–∑ –≤—Å—ë</button>
        <button id="clearOrder" class="btn primary btn-clear-order tooltip-wrap" data-tip="–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–∫–∞–∑–∞" style="padding:4px 10px;">–û—á–∏—Å—Ç–∏—Ç—å</button>
        <button id="copyOrder" class="btn primary tooltip-wrap" data-tip="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞" style="padding:4px 10px;"><img src="./icons/copy.png" width="14" height="14" alt="" style="vertical-align:-2px;"> –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        <button id="shareOrderBtn" class="btn primary tooltip-wrap" data-tip="–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É" style="padding:4px 10px;"><img src="./icons/share.svg" width="14" height="14" alt="" style="vertical-align:-2px;"> –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        <button id="saveOrder" class="btn primary tooltip-wrap" data-tip="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–∫–∞–∑ –≤ –∏—Å—Ç–æ—Ä–∏—é" style="padding:4px 10px;"><img src="./icons/save.png" width="14" height="14" alt="" style="vertical-align:-2px;"> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button id="exportExcelBtn" class="btn primary tooltip-wrap" data-tip="–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑ –≤ Excel" style="padding:4px 10px;"><img src="./icons/excel.png" width="14" height="14" alt=""> Excel</button>
        <button id="importStockBtn" class="btn primary tooltip-wrap" data-tip="–ò–º–ø–æ—Ä—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏–∑ Excel/CSV" style="padding:4px 10px;"><img src="./icons/import.png" width="14" height="14" alt=""> –ò–º–ø–æ—Ä—Ç</button>
        
        <div style="flex:1;min-width:20px;"></div>
        
        <section class="search" style="max-width:450px;min-width:280px;margin:0;flex:2;">
          <input id="productSearch" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞" />
          <button id="clearSearch" class="search-clear hidden">‚úï</button>
          <div id="searchResults" class="search-results"></div>
        </section>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th style="width:30px;"></th>
              <th>–¢–æ–≤–∞—Ä</th>
              <th>–†–∞—Å—Ö–æ–¥</th>
              <th>–û—Å—Ç–∞—Ç–æ–∫</th>
              <th class="transit-col">–¢—Ä–∞–Ω–∑–∏—Ç</th>
              <th class="stock-col">–ó–∞–ø–∞—Å</th>
              <th>–†–∞—Å—á—ë—Ç</th>
              <th>–ó–∞–∫–∞–∑ (—à—Ç / –∫–æ—Ä)</th>
              <th>–•–≤–∞—Ç–∏—Ç –¥–æ</th>
              <th>–ü–∞–ª–ª–µ—Ç—ã</th>
              <th style="width:40px;"></th>
            </tr>
          </thead>
          <tbody id="items"></tbody>
        </table>
      </div>
    </section>

    <!-- –ò–¢–û–ì -->
    <section class="card">
      <h2>–ò—Ç–æ–≥ –∑–∞–∫–∞–∑–∞</h2>
      <div id="finalSummary"></div>
    </section>

  </div>


</main>

<!-- ===== –ú–û–î–ê–õ–ö–ê: –ò–°–¢–û–†–ò–Ø –ó–ê–ö–ê–ó–û–í ===== -->
<div id="historyModal" class="modal hidden">
  <div class="modal-box large">
    <div class="modal-header">
      <h2><img src="./icons/history.png" width="16" height="16" alt=""> –ò—Å—Ç–æ—Ä–∏—è</h2>
      <button id="closeHistory" class="modal-close">‚úï</button>
    </div>

    <div style="display:flex;gap:12px;margin-bottom:16px;flex-wrap:wrap;">
      <label style="flex:0;min-width:140px;">
        –†–∞–∑–¥–µ–ª
        <select id="historyType">
          <option value="orders">–ó–∞–∫–∞–∑—ã</option>
          <option value="plans">–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
        </select>
      </label>
      <label style="flex:1;">
        –Æ—Ä. –ª–∏—Ü–æ
        <select id="historyLegalEntity">
          <option value="">–í—Å–µ</option>
          <option value="–ë—É—Ä–≥–µ—Ä –ë–ö">–ë—É—Ä–≥–µ—Ä –ë–ö</option>
          <option value="–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞">–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞</option>
          <option value="–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä">–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä</option>
        </select>
      </label>
      <label style="flex:1;">
        –ü–æ—Å—Ç–∞–≤—â–∏–∫
        <select id="historySupplier">
          <option value="">–í—Å–µ</option>
        </select>
      </label>
    </div>

    <div id="orderHistory"></div>
  </div>
</div>


<!-- ===== –ú–û–î–ê–õ–ö–ê: –ù–û–í–´–ô –¢–û–í–ê–† ===== -->
<div id="manualModal" class="modal hidden">
  <div class="modal-box">
    <div class="modal-header">
      <h2><img src="./icons/new-product.png" width="16" height="16" alt=""> –ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h2>
      <button id="closeManual" class="modal-close">‚úï</button>
    </div>

    <input id="m_sku" placeholder="–ê—Ä—Ç–∏–∫—É–ª" />
    <input id="m_name" placeholder="–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ*" />
    <input id="m_supplier" placeholder="–ü–æ—Å—Ç–∞–≤—â–∏–∫" />
    
    <label>
      –Æ—Ä. –ª–∏—Ü–æ
      <select id="m_legalEntity">
        <option value="–ë—É—Ä–≥–µ—Ä –ë–ö">–ë—É—Ä–≥–µ—Ä –ë–ö</option>
        <option value="–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞">–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞</option>
        <option value="–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä">–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä</option>
      </select>
    </label>
    
    <input id="m_box" type="number" placeholder="–®—Ç—É–∫ –≤ –∫–æ—Ä–æ–±–∫–µ" />
    <input id="m_pallet" type="number" placeholder="–ö–æ—Ä–æ–±–æ–≤ –Ω–∞ –ø–∞–ª–ª–µ—Ç–µ" />
    
    <label>
      –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è
      <select id="m_unit">
        <option value="—à—Ç">—à—Ç—É–∫–∏</option>
        <option value="–ª">–ª–∏—Ç—Ä—ã</option>
        <option value="–∫–≥">–∫–∏–ª–æ–≥—Ä–∞–º–º—ã</option>
      </select>
    </label>

    <label>
      <input type="checkbox" id="m_save" checked />
      –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±–∞–∑—É
    </label>

    <div class="actions">
      <button id="m_add" class="btn primary">–î–æ–±–∞–≤–∏—Ç—å</button>
      <button id="m_cancel" class="btn secondary">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>

<!-- ===== –ú–û–î–ê–õ–ö–ê: –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï ===== -->
<div id="confirmModal" class="modal hidden">
  <div class="modal-box" style="max-width:400px;">
    <div class="modal-header">
      <h2 id="confirmTitle">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
      <button id="closeConfirm" class="modal-close">‚úï</button>
    </div>
    
    <p id="confirmMessage" style="margin:0 0 24px;color:#5A2D0C;line-height:1.6;"></p>
    
    <div class="actions">
      <button id="confirmYes" class="btn primary">–î–∞</button>
      <button id="confirmNo" class="btn secondary">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>



<!-- ===== –ú–û–î–ê–õ–ö–ê: –ë–ê–ó–ê –î–ê–ù–ù–´–• ===== -->
<div id="databaseModal" class="modal hidden">
  <div class="modal-box large">
    <div class="modal-header">
      <h2><img src="./icons/base.png" width="20" height="20" style="vertical-align:-3px;" alt=""> –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö <span id="dbCardCount" style="font-weight:400;font-size:14px;color:#8B7355;"></span></h2>
      <div style="display:flex;gap:8px;align-items:center;margin-left:auto;margin-right:12px;">
        <button id="dbNewProductBtn" class="btn primary" style="height:32px;font-size:12px;white-space:nowrap;display:none;">+ –ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä</button>
        <button id="dbNewSupplierBtn" class="btn primary" style="height:32px;font-size:12px;white-space:nowrap;display:none;">+ –ù–æ–≤—ã–π –ø–æ—Å—Ç–∞–≤—â–∏–∫</button>
      </div>
      <button id="closeDatabase" class="modal-close">‚úï</button>
    </div>

    <!-- –¢–∞–±—ã -->
    <div class="db-tabs">
      <button class="db-tab active" data-tab="products">–¢–æ–≤–∞—Ä—ã</button>
      <button class="db-tab" data-tab="suppliers">–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏</button>
    </div>

    <!-- –¢–ê–ë: –¢–û–í–ê–†–´ -->
    <div id="dbTabProducts" class="db-tab-content">
      <div style="display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap;margin-bottom:12px;">
        <label style="flex:1;min-width:140px;">
          –Æ—Ä. –ª–∏—Ü–æ
          <select id="dbLegalEntity">
            <option value="–ë—É—Ä–≥–µ—Ä –ë–ö">–ë—É—Ä–≥–µ—Ä –ë–ö</option>
            <option value="–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞">–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞</option>
            <option value="–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä">–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä</option>
          </select>
        </label>
      </div>

      <section class="search" style="margin:0 0 12px;">
        <input id="dbSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º" />
        <button id="clearDbSearch" class="search-clear hidden" title="–û—á–∏—Å—Ç–∏—Ç—å">‚úï</button>
      </section>

      <div id="databaseList" style="max-height:55vh;overflow-y:auto;"></div>
    </div>

    <!-- –¢–ê–ë: –ü–û–°–¢–ê–í–©–ò–ö–ò -->
    <div id="dbTabSuppliers" class="db-tab-content hidden">
      <div style="display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap;margin-bottom:12px;">
        <label style="flex:1;min-width:140px;">
          –Æ—Ä. –ª–∏—Ü–æ
          <select id="dbSupplierLegalEntity">
            <option value="–ë—É—Ä–≥–µ—Ä –ë–ö">–ë—É—Ä–≥–µ—Ä –ë–ö</option>
            <option value="–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞">–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞</option>
            <option value="–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä">–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä</option>
          </select>
        </label>
      </div>

      <section class="search" style="margin:0 0 12px;">
        <input id="dbSupplierSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º" />
        <button id="clearDbSupplierSearch" class="search-clear hidden" title="–û—á–∏—Å—Ç–∏—Ç—å">‚úï</button>
      </section>

      <div id="supplierList" style="max-height:55vh;overflow-y:auto;"></div>
    </div>
  </div>
</div>

<!-- ===== –ú–û–î–ê–õ–ö–ê: –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –ö–ê–†–¢–û–ß–ö–ò –¢–û–í–ê–†–ê ===== -->
<div id="editCardModal" class="modal hidden">
  <div class="modal-box">
    <div class="modal-header">
      <h2 id="editCardTitle"><img src="./icons/edit.png" width="20" height="20" style="vertical-align:-3px;" alt=""> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏</h2>
      <button id="closeEditCard" class="modal-close">‚úï</button>
    </div>

    <input id="e_name" placeholder="–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ*" />
    <input id="e_sku" placeholder="–ê—Ä—Ç–∏–∫—É–ª" />
    
    <label>
      –ü–æ—Å—Ç–∞–≤—â–∏–∫
      <select id="e_supplier">
        <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ‚Äî</option>
      </select>
    </label>
    
    <label>
      –Æ—Ä. –ª–∏—Ü–æ
      <select id="e_legalEntity">
        <option value="–ë—É—Ä–≥–µ—Ä –ë–ö">–ë—É—Ä–≥–µ—Ä –ë–ö</option>
        <option value="–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞">–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞</option>
        <option value="–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä">–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä</option>
      </select>
    </label>
    
    <input id="e_box" type="number" placeholder="–®—Ç—É–∫ –≤ –∫–æ—Ä–æ–±–∫–µ" />
    <input id="e_pallet" type="number" placeholder="–ö–æ—Ä–æ–±–æ–∫ –Ω–∞ –ø–∞–ª–ª–µ—Ç–µ" />
    
    <label>
      –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è
      <select id="e_unit">
        <option value="—à—Ç">—à—Ç—É–∫–∏</option>
        <option value="–ª">–ª–∏—Ç—Ä—ã</option>
        <option value="–∫–≥">–∫–∏–ª–æ–≥—Ä–∞–º–º—ã</option>
      </select>
    </label>

    <div class="actions" style="margin-bottom:0;">
      <button id="e_save" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button id="e_cancel" class="btn secondary">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>

<!-- ===== –ú–û–î–ê–õ–ö–ê: –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –ü–û–°–¢–ê–í–©–ò–ö–ê ===== -->
<div id="editSupplierModal" class="modal hidden">
  <div class="modal-box">
    <div class="modal-header">
      <h2 id="editSupplierTitle"><img src="./icons/edit.png" width="20" height="20" style="vertical-align:-3px;" alt=""> –ü–æ—Å—Ç–∞–≤—â–∏–∫</h2>
      <button id="closeEditSupplier" class="modal-close">‚úï</button>
    </div>

    <input id="s_fullName" placeholder="–ü–æ–ª–Ω–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ" />
    <input id="s_shortName" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ* (–¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤)" />

    <label>
      –Æ—Ä. –ª–∏—Ü–æ
      <select id="s_legalEntity">
        <option value="–ë—É—Ä–≥–µ—Ä –ë–ö">–ë—É—Ä–≥–µ—Ä –ë–ö</option>
        <option value="–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞">–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞</option>
        <option value="–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä">–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä</option>
      </select>
    </label>

    <div style="margin-top:12px;padding-top:12px;border-top:1px solid var(--border-light);">
      <div style="font-weight:600;font-size:13px;margin-bottom:8px;color:var(--brown);">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
        <label style="font-size:12px;">
          WhatsApp (—Ç–µ–ª–µ—Ñ–æ–Ω)
          <input id="s_whatsapp" placeholder="+375291234567" />
        </label>
        <label style="font-size:12px;">
          Telegram (—Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ @username)
          <input id="s_telegram" placeholder="+375291234567 –∏–ª–∏ @username" />
        </label>
        <label style="font-size:12px;">
          Viber (—Ç–µ–ª–µ—Ñ–æ–Ω)
          <input id="s_viber" placeholder="+375291234567" />
        </label>
        <label style="font-size:12px;">
          Email
          <input id="s_email" placeholder="supplier@mail.com" type="email" />
        </label>
      </div>
    </div>

    <div class="actions" style="margin-bottom:0;margin-top:16px;">
      <button id="s_save" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button id="s_cancel" class="btn secondary">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>



<!-- ===== –ú–û–î–ê–õ–ö–ê: –°–û–•–†–ê–ù–ï–ù–ò–ï –ó–ê–ö–ê–ó–ê ===== -->
<div id="saveOrderModal" class="modal hidden">
  <div class="modal-box" style="max-width:500px;">
    <div class="modal-header">
      <h2><img src="./icons/save.png" width="20" height="20" style="vertical-align:-3px;" alt=""> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–∫–∞–∑</h2>
      <button id="closeSaveOrder" class="modal-close">‚úï</button>
    </div>
    
    <p style="margin:0 0 16px;color:#5A2D0C;">–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –∫ –∑–∞–∫–∞–∑—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</p>
    
    <textarea 
      id="orderNote" 
      placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°—Ä–æ—á–Ω—ã–π –∑–∞–∫–∞–∑, –ü—Ä–æ–±–Ω–∞—è –ø–∞—Ä—Ç–∏—è, –∏ —Ç.–¥." 
      style="width:100%;min-height:80px;padding:10px;border:1px solid #E5BE9E;border-radius:4px;font-family:inherit;font-size:14px;resize:vertical;margin-bottom:20px;"
    ></textarea>
    
    <div class="actions" style="margin:0;">
      <button id="confirmSaveOrder" class="btn primary"><img src="./icons/save.png" width="14" height="14" alt=""> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button id="cancelSaveOrder" class="btn secondary">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>
<footer class="footer">
  <span class="version">–í–µ—Ä—Å–∏—è: <span id="appVersion">0.9.1</span></span>
</footer>

<!-- ===== –ü–†–û–í–ï–†–ö–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ===== -->
<script>
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –î–û –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
(function() {
  if (localStorage.getItem('bk_logged_in') === 'true') {
    document.getElementById('loginOverlay').style.display = 'none';
  }
})();
</script>

<script type="module" src="./ui.js?v=0.9.1"></script>

<!-- ===== –ú–û–î–ê–õ–ö–ê –ê–ù–ê–õ–ò–¢–ò–ö–ò ===== -->
<div id="analyticsModal" class="modal hidden">
  <div class="modal-box large" style="width:min(1100px,96vw);padding:24px;">
    <div class="modal-header">
      <h2 style="font-size:20px;"><img src="./icons/analytics.png" width="16" height="16" alt=""> –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤</h2>
      <button id="closeAnalytics" class="modal-close">‚úï</button>
    </div>
    <!-- –ö–æ–Ω—Ç—Ä–æ–ª—ã –ø–µ—Ä–∏–æ–¥–∞ -->
    <div style="display:flex;align-items:center;gap:12px;padding:12px 16px;background:#fdf9f3;border-radius:8px;margin-bottom:20px;">
      <span style="font-weight:600;color:#5A2D0C;font-size:13px;">–ü–ï–†–ò–û–î:</span>
      <select id="analyticsPeriod" style="padding:6px 12px;border-radius:6px;border:1px solid #e8e3db;background:white;font-size:13px;">
        <option value="7">7 –¥–Ω–µ–π</option>
        <option value="14">14 –¥–Ω–µ–π</option>
        <option value="30" selected>30 –¥–Ω–µ–π</option>
        <option value="60">60 –¥–Ω–µ–π</option>
        <option value="90">90 –¥–Ω–µ–π</option>
      </select>
      <button id="refreshAnalytics" class="btn secondary" style="padding:6px 14px;font-size:13px;"><img src="./icons/update.png" width="14" height="14" alt=""> –û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -->
    <div id="analyticsContainer" style="max-height:72vh;overflow-y:auto;padding-right:4px;">
      <div style="text-align:center;padding:60px;color:#999;">
        <div class="loading-spinner"></div>
        <div style="margin-top:14px;">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
      </div>
    </div>
  </div>
</div>

<!-- ===== –ú–û–î–ê–õ–ö–ê: –ö–ê–õ–ï–ù–î–ê–†–¨ –ü–û–°–¢–ê–í–û–ö ===== -->
<div id="calendarModal" class="modal hidden">
  <div class="modal-box" style="width:min(720px,96vw);padding:24px;">
    <div class="modal-header">
      <h2 style="font-size:20px;"><img src="./icons/calendar.png" width="14" height="14" alt=""> –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ—Å—Ç–∞–≤–æ–∫</h2>
      <button id="closeCalendar" class="modal-close">‚úï</button>
    </div>
    <div id="calendarContainer"></div>
  </div>
</div>

<!-- ===== –ú–û–î–ê–õ–ö–ê: –ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–ï ===== -->
<div id="planningModal" class="modal hidden">
  <div class="modal-box large" style="width:min(1400px,98vw);max-width:98vw;padding:24px;">
    <div class="modal-header">
      <h2 style="font-size:20px;"><img src="./icons/planning.png" width="14" height="14" alt=""> –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤</h2>
      <button id="closePlanning" class="modal-close">‚úï</button>
    </div>

    <!-- –ö–æ–Ω—Ç—Ä–æ–ª—ã -->
    <div style="display:flex;flex-wrap:wrap;gap:12px;align-items:flex-end;padding:14px 16px;background:#fdf9f3;border-radius:8px;margin-bottom:16px;">
      <label style="flex:1;min-width:140px;">
        –Æ—Ä. –ª–∏—Ü–æ
        <select id="planLegalEntity">
          <option value="–ë—É—Ä–≥–µ—Ä –ë–ö">–ë—É—Ä–≥–µ—Ä –ë–ö</option>
          <option value="–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞">–í–æ–≥–ª–∏—è –ú–∞—Ç—Ç–∞</option>
          <option value="–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä">–ü–∏—Ü—Ü–∞ –°—Ç–∞—Ä</option>
        </select>
      </label>
      <label style="flex:1;min-width:150px;">
        –ü–æ—Å—Ç–∞–≤—â–∏–∫
        <select id="planSupplier">
          <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ‚Äî</option>
        </select>
      </label>
      <label style="flex:0;min-width:160px;">
        –ü–µ—Ä–∏–æ–¥
        <select id="planMonths">
          <optgroup label="–ù–µ–¥–µ–ª–∏">
            <option value="w1">1 –Ω–µ–¥–µ–ª—è</option>
            <option value="w2">2 –Ω–µ–¥–µ–ª–∏</option>
            <option value="w3">3 –Ω–µ–¥–µ–ª–∏</option>
            <option value="w4">4 –Ω–µ–¥–µ–ª–∏</option>
            <option value="w5">5 –Ω–µ–¥–µ–ª—å</option>
            <option value="w6">6 –Ω–µ–¥–µ–ª—å</option>
            <option value="w8">8 –Ω–µ–¥–µ–ª—å</option>
            <option value="w10">10 –Ω–µ–¥–µ–ª—å</option>
            <option value="w12">12 –Ω–µ–¥–µ–ª—å</option>
          </optgroup>
          <optgroup label="–ú–µ—Å—è—Ü—ã">
            <option value="m1">1 –º–µ—Å—è—Ü</option>
            <option value="m2">2 –º–µ—Å—è—Ü–∞</option>
            <option value="m3" selected>3 –º–µ—Å—è—Ü–∞</option>
          </optgroup>
        </select>
      </label>
      <label style="flex:0;min-width:130px;">
        –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
        <input type="date" id="planStartDate" />
      </label>
      <label style="flex:0;min-width:100px;">
        –í–≤–æ–¥ –≤
        <select id="planUnit">
          <option value="pieces">–®—Ç—É–∫–∞—Ö</option>
          <option value="boxes">–ö–æ—Ä–æ–±–∫–∞—Ö</option>
        </select>
      </label>
      <label style="flex:0;min-width:110px;" class="tooltip-wrap" data-tip="–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ä–∞—Å—Ö–æ–¥–∞, –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 30%">
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        <select id="planDataValidation">
          <option value="true">–î–∞</option>
          <option value="false">–ù–µ—Ç</option>
        </select>
      </label>
      <div style="flex-basis:100%;"></div>
      <button id="planLoadProducts" class="btn primary" style="height:36px;white-space:nowrap;">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–≤–∞—Ä—ã</button>
    </div>

    <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ -->
    <div style="font-size:12px;color:var(--muted);margin-bottom:12px;padding:0 4px;">
      –í–≤–µ–¥–∏—Ç–µ —Ä–∞—Å—Ö–æ–¥ –∑–∞ –º–µ—Å—è—Ü, –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ –∏ —É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç –æ–±—ä—ë–º—ã –∑–∞–∫–∞–∑–∞ –ø–æ –º–µ—Å—è—Ü–∞–º —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º –¥–æ –∫–æ—Ä–æ–±–æ–∫.
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="planTableContainer" style="max-height:58vh;overflow:auto;">
      <div style="text-align:center;padding:50px;color:var(--muted);">
        <div style="font-size:28px;margin-bottom:8px;"><img src="./icons/planning.png" width="64" height="64" alt=""></div>
        <div style="font-size:14px;">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–≤–∞—Ä—ã¬ª</div>
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-top:14px;padding-top:14px;border-top:1px solid var(--border-light);">
      <button id="planFillConsumptionBtn" class="btn secondary" style="background:#e8f5e9;color:#2e7d32;border-color:#a5d6a7;">üìä –ü–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
      <button id="planImportBtn" class="btn secondary"><img src="./icons/import.png" width="14" height="14" alt=""> –ò–º–ø–æ—Ä—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤</button>
      <button id="planClearBtn" class="btn secondary" style="background:#fff3e0;color:#e65100;border-color:#ffcc80;">üóë –û–±–Ω—É–ª–∏—Ç—å –≤—Å—ë</button>
      <div style="flex:1;"></div>
      <button id="planExcelBtn" class="btn secondary" style="background:#217346;color:white;border-color:#1a5c38;"><img src="./icons/excel.png" width="14" height="14" alt=""> Excel</button>
      <button id="planCopyBtn" class="btn secondary"><img src="./icons/copy.png" width="14" height="14" alt="" style="vertical-align:-2px;"> –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω</button>
      <button id="planSaveBtn" class="btn primary"><img src="./icons/save.png" width="14" height="14" alt="" style="vertical-align:-2px;"> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞–Ω</button>
    </div>
  </div>
</div>

</body>
</html>